# original Makefile by Pasi "okun" Valminen, 2004
# edited by Pekka "PQ" Paalanen, 2004 - 2007
# version 4.1.2007

## Modify these to your needs.

SHELL=/bin/bash

# document target basename
TARGET   := neurocomputing

# Autogenerated source files, like eps-figures created with
# gnuplot scripts. Target 'distclean' will delete files listed here.
AUTOTGT  :=


## The following should be ok as is.

# document source files
SRC      := $(wildcard *.tex) $(wildcard *.bib) $(AUTOTGT)

# programs
GS       := gs
TEXI2PDF := texi2pdf
GNUPLOT  := gnuplot
EPS2PDF  := epstopdf

GSPDF_OPTS := -sDEVICE=pdfwrite -dPDFSETTINGS=/printer \
              -dCompatibilityLevel=1.4 -dMaxSubsetPct=100 -dSubsetFonts=true \
              -dEmbedAllFonts=true

# The GS options are from http://www.ctan.org/tex-archive/macros/latex/
#   contrib/IEEEtran/testflow/testflow_doc.txt

# Texi2pdf runs bibtex automatically and pdflatex as many times as needed.

all: $(TARGET).pdf

clean:
	rm -f *.{aux,bbl,blg,tmp,dvi,toc,log,out,idx,ilg,ind,brf,spl} *~

distclean: clean
	rm -f $(TARGET).pdf $(AUTOTGT)

view: $(TARGET).pdf
	xpdf -z width -remote view-$(abspath $(TARGET).pdf) $(TARGET).pdf &

%.pdf: %.tex $(SRC)
	$(TEXI2PDF) $<

%.eps: %.gp
	$(GNUPLOT) $<

%.pdf: %.eps
	$(EPS2PDF) --nogs $< | $(GS) -q $(GSPDF_OPTS) \
	  -dAutoRotatePages=/None -sOutputFile=$@ - -c quit

.SUFFIXES:
.PRECIOUS: %.dvi %.pdf
.DELETE_ON_ERROR: %.dvi %.pdf
.PHONY: all clean distclean view
